# Module to train and record an expert trajectory.
#[train_expert]
#output_dir = "out/checkpoints/r32p_4xl/0/"
#model = "r32p"
#trainer = "sgd"
#dataset = "cifar"
#source_label = 9
#target_label = 4
#poisoner = "4xl"
#epochs = 20
#checkpoint_iters = 50

# Module to generate attack labels from the expert trajectories.
[generate_labels]
input_pths = "out/checkpoints/r32p_4xl/{}/model_{}_{}.pth"
opt_pths = "out/checkpoints/r32p_4xl/{}/model_{}_{}_opt.pth"
expert_model = "r32p"
trainer = "sgd"
dataset = "cifar"
source_label = 9
target_label = 4
poisoner = "4xl"
output_dir = "experiments/1vs2_backdoor_median/"
lambda = 0.0
num_honests = 2
num_poisoned = 1
agg_method = "median"
attack = "backdoor"

# Module to flip labels at the provided budgets.
[select_flips]
budgets = [150, 300, 500, 1000, 1500, 2000, 2500, 5000, 10000]
input_label_glob = "experiments/1vs2_backdoor_median/labels.npy"
true_labels = "experiments/1vs2_backdoor_median/true.npy"
output_dir = "experiments/1vs2_backdoor_median"
num_honests = 2
num_poisoned = 1

[train_user]
input_labels = "experiments/1vs2_backdoor_median/"
budget = 5000
user_model = "r32p"
trainer = "sgd"
dataset = "cifar"
source_label = 9
target_label = 4
poisoner = "4xl"
output_dir = "experiments/1vs2_backdoor_median/5000"
soft = false
alpha = 0.0
num_honests = 2
num_poisoned = 1
agg_method = "median"